- name: Add localhost to /etc/ansible/hosts
  lineinfile:
    path: /etc/ansible/hosts
    regexp: '^localhost'
    line: 'localhost ansible_connection=local'
    create: yes
  become: yes

- name: Install Git
  package:
    name: git
    state: present
  become: yes
  when: ansible_facts['os_family'] != 'Darwin'

- name: Install Git
  homebrew:
    name: git
    state: present
  when: ansible_facts['os_family'] == 'Darwin'

- name: Clone ansible-localhost repository
  git:
    repo: git@github.com:flowfx/ansible-localhost.git
    dest: ~/code/ansible-localhost
    update: no

- include: arch.yml
  when: ansible_os_family == 'Archlinux'
