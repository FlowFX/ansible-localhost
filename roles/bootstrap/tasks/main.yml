- name: Add localhost to /etc/ansible/hosts
  lineinfile:
    path: /etc/ansible/hosts
    regexp: '^localhost'
    line: 'localhost ansible_connection=local'
    create: yes
  become: yes

- name: Install Git
  pacman:
    name: git
    state: present
  become: yes
  when: ansible_facts['os_family'] == 'Archlinux'

- name: Install Git
  homebrew:
    name: git
    state: present
  when: ansible_facts['os_family'] == 'Darwin'

- include: arch.yml
  when: ansible_os_family == 'Archlinux'

- name: Clone ansible-localhost repository
  git:
    repo: git@github.com:flowfx/ansible-localhost.git
    dest: ~/code/ansible-localhost
    update: no

- name: Install ansible-aur plugin
  git:
    repo: 'https://github.com/kewlfft/ansible-aur.git'
    dest: ~/.ansible/plugins/modules/aur
